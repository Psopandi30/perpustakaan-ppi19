import{j as e,X as j,r as k,R as N,P as w,s as v,t as S,l as I,T as L,v as f,o as n,w as C,x as A}from"./index-DnDJVwWd.js";import{r,R as E}from"./charts-vendor-DhOxG2_S.js";import"./react-vendor-Bzgz95E1.js";const P=({data:i,onClose:x,onSave:m})=>{const[a,c]=r.useState(i),[o,s]=r.useState(null),u=d=>{const{name:b,value:p}=d.target;c(y=>({...y,[b]:p})),s(null)},h=d=>{if(d.preventDefault(),!a.youtubeLink){s("Link Youtube wajib diisi.");return}m(a)};return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-40 flex justify-center items-center p-4",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md",children:[e.jsxs("div",{className:"flex justify-between items-center p-4 border-b",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"Edit Live Streaming"}),e.jsx("button",{onClick:x,children:e.jsx(j,{className:"h-6 w-6 text-gray-500 hover:text-gray-800"})})]}),e.jsxs("form",{onSubmit:h,className:"p-6 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Judul Siaran"}),e.jsx("input",{type:"text",name:"title",value:a.title,onChange:u,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-dark-teal",placeholder:"Masukkan Judul Siaran"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Link Youtube"}),e.jsx("input",{type:"text",name:"youtubeLink",value:a.youtubeLink,onChange:u,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-dark-teal"})]}),o&&e.jsx("p",{className:"text-red-500 text-sm",children:o}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[e.jsx("button",{type:"button",onClick:x,className:"px-4 py-2 bg-gray-200 rounded-md hover:bg-gray-300 transition-colors",children:"Batal"}),e.jsx("button",{type:"submit",className:"px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 transition-colors",children:"Simpan"})]})]})]})})},T=()=>{const[i,x]=r.useState([]),[m,a]=r.useState(!1),[c,o]=r.useState(null),s=E.useCallback(async()=>{const t=await k();x(t)},[]);r.useEffect(()=>{s();const t=setInterval(s,5e3);return()=>clearInterval(t)},[s]);const u=()=>{o(null),a(!0)},h=t=>{o(t),a(!0)},d=async t=>{if(c){const l={...c,title:t.title,youtubeLink:t.youtubeLink};await f(l)?n.success("Berhasil memperbarui data."):n.error("Gagal memperbarui.")}else{const l={title:t.title,youtubeLink:t.youtubeLink,order:i.length+1,isActive:!1};await A(l)?n.success("Berhasil menambahkan video baru."):n.error("Gagal menambahkan.")}a(!1),s()},b=async t=>{window.confirm("Apakah Anda yakin ingin menghapus video ini dari playlist?")&&(await C(t),n.success("Video dihapus."),s())},p=async t=>{const l={...t,isActive:!0};await f(l),n.success(`Video "${t.title}" diaktifkan.`),s()},y=async t=>{const l={...t,isActive:!1};await f(l),n.success(`Video "${t.title}" dinonaktifkan.`),s()};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md border border-gray-200 h-full flex flex-col",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(N,{className:"h-8 w-8 text-dark-teal"}),e.jsx("h2",{className:"text-xl font-bold text-gray-800 uppercase tracking-wide",children:"DAFTAR LIVE STREAMING"})]}),e.jsx("button",{onClick:u,className:"flex items-center justify-center bg-green-500 text-white font-bold p-2 rounded shadow hover:bg-green-600 transition-colors duration-300",title:"Tambahkan Video ke Playlist",children:e.jsx(w,{className:"h-6 w-6"})})]}),e.jsx("div",{className:"flex-grow border-2 border-gray-300 rounded-lg overflow-hidden flex flex-col",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full bg-white text-sm",children:[e.jsx("thead",{className:"bg-gray-100 border-b-2 border-gray-300",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left font-semibold text-gray-600 w-16",children:"No"}),e.jsx("th",{className:"px-4 py-3 text-left font-semibold text-gray-600",children:"Judul Siaran"}),e.jsx("th",{className:"px-4 py-3 text-left font-semibold text-gray-600",children:"Link Youtube"}),e.jsx("th",{className:"px-4 py-3 text-center font-semibold text-gray-600 w-24",children:"Status"}),e.jsx("th",{className:"px-4 py-3 w-48 text-center font-semibold text-gray-600",children:"Aksi"})]})}),e.jsx("tbody",{children:i.length>0?i.map((t,l)=>e.jsxs("tr",{className:"border-b hover:bg-gray-50",children:[e.jsx("td",{className:"px-4 py-3 text-gray-500",children:l+1}),e.jsx("td",{className:"px-4 py-3 font-medium text-gray-800",children:t.title}),e.jsx("td",{className:"px-4 py-3 text-blue-600 truncate max-w-xs",children:e.jsx("a",{href:t.youtubeLink,target:"_blank",rel:"noopener noreferrer",children:t.youtubeLink})}),e.jsx("td",{className:"px-4 py-3 text-center",children:t.isActive?e.jsx("span",{className:"bg-green-100 text-green-800 text-xs px-2 py-1 rounded-full",children:"Aktif"}):e.jsx("span",{className:"bg-gray-100 text-gray-400 text-xs px-2 py-1 rounded-full",children:"Non-aktif"})}),e.jsxs("td",{className:"px-4 py-3 flex items-center justify-center space-x-3",children:[e.jsx("button",{onClick:()=>p(t),title:"Mainkan / Aktifkan",children:e.jsx(v,{className:"h-6 w-6 text-green-600 hover:text-green-800"})}),e.jsx("button",{onClick:()=>y(t),title:"Stop / Non-aktifkan",children:e.jsx(S,{className:"h-6 w-6 text-red-600 hover:text-red-800"})}),e.jsx("button",{onClick:()=>h(t),title:"Edit",children:e.jsx(I,{className:"h-6 w-6 text-dark-teal hover:text-teal-800"})}),e.jsx("button",{onClick:()=>b(t.id),title:"Hapus",children:e.jsx(L,{className:"h-6 w-6 text-red-600 hover:text-red-800"})})]})]},t.id)):e.jsx("tr",{children:e.jsx("td",{colSpan:5,className:"px-4 py-8 text-center text-gray-500",children:"Playlist kosong. Belum ada video yang ditambahkan."})})})]})})})]}),m&&e.jsx(P,{data:c||{title:"",youtubeLink:""},onClose:()=>a(!1),onSave:d}),e.jsx("style",{children:`
                .custom-scrollbar::-webkit-scrollbar {
                    width: 8px;
                }
                .custom-scrollbar::-webkit-scrollbar-track {
                    background: #f1f1f1;
                    border-radius: 10px;
                }
                .custom-scrollbar::-webkit-scrollbar-thumb {
                    background: #c1c1c1;
                    border-radius: 10px;
                }
                .custom-scrollbar::-webkit-scrollbar-thumb:hover {
                    background: #a8a8a8;
                }
            `})]})};export{T as default};
