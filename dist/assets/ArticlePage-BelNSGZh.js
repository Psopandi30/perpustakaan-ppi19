import{j as e,as as N,at as k,au as v,av as T}from"./index-BiA865_u.js";import{r}from"./charts-vendor-DhOxG2_S.js";import{r as A}from"./file-C-CVBF3a.js";import"./react-vendor-Bzgz95E1.js";const E=()=>{const[x,m]=r.useState([]),[h,i]=r.useState(!1),[n,d]=r.useState(null),[b,u]=r.useState(!0),[l,s]=r.useState({judul:"",konten:"",tanggalTerbit:new Date().toISOString().split("T")[0],imageUrl:""}),c=async()=>{u(!0);try{const t=await N();m(t)}catch(t){console.error("Error loading articles:",t),m([])}finally{u(!1)}};r.useEffect(()=>{c()},[]);const p=async t=>{var g;const a=(g=t.target.files)==null?void 0:g[0];if(a)try{const o=await A(a);s(w=>({...w,imageUrl:o}))}catch(o){console.error("Error reading image file:",o),alert("Gagal membaca file gambar.")}},f=async t=>{if(t.preventDefault(),!l.judul||!l.tanggalTerbit){alert("Judul dan tanggal terbit wajib diisi.");return}n?await v({...l,id:n.id})?(await c(),d(null),i(!1),s({judul:"",konten:"",tanggalTerbit:new Date().toISOString().split("T")[0],imageUrl:""})):alert("Gagal mengupdate artikel."):await T(l)?(await c(),i(!1),s({judul:"",konten:"",tanggalTerbit:new Date().toISOString().split("T")[0],imageUrl:""})):alert("Gagal menambahkan artikel.")},j=t=>{d(t),s({judul:t.judul,konten:t.konten||"",tanggalTerbit:t.tanggalTerbit,imageUrl:t.imageUrl||""}),i(!0)},y=async t=>{window.confirm("Apakah Anda yakin ingin menghapus artikel ini?")&&(await k(t)?await c():alert("Gagal menghapus artikel."))};return b?e.jsx("div",{className:"p-6 text-center",children:"Loading articles..."}):e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Kelola Artikel"}),e.jsx("button",{onClick:()=>{d(null),s({judul:"",konten:"",tanggalTerbit:new Date().toISOString().split("T")[0],imageUrl:""}),i(!0)},className:"bg-dark-teal text-white px-4 py-2 rounded-lg hover:bg-teal-700 transition-colors",children:"+ Tambah Artikel"})]}),e.jsx("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Judul"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Tanggal Terbit"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Aksi"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:x.map(t=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"text-sm font-medium text-gray-900",children:t.judul})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"text-sm text-gray-500",children:new Date(t.tanggalTerbit).toLocaleDateString("id-ID",{day:"numeric",month:"long",year:"numeric"})})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:[e.jsx("button",{onClick:()=>j(t),className:"text-blue-600 hover:text-blue-900 mr-4",children:"Edit"}),e.jsx("button",{onClick:()=>y(t.id),className:"text-red-600 hover:text-red-900",children:"Hapus"})]})]},t.id))})]})}),h&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-2xl w-full mx-4 max-h-[90vh] overflow-y-auto",children:[e.jsx("h3",{className:"text-xl font-bold mb-4",children:n?"Edit Artikel":"Tambah Artikel"}),e.jsxs("form",{onSubmit:f,children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Judul"}),e.jsx("input",{type:"text",value:l.judul,onChange:t=>s(a=>({...a,judul:t.target.value})),className:"w-full px-4 py-2 border border-gray-300 rounded-md",required:!0})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Konten"}),e.jsx("textarea",{value:l.konten,onChange:t=>s(a=>({...a,konten:t.target.value})),className:"w-full px-4 py-2 border border-gray-300 rounded-md",rows:5})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tanggal Terbit"}),e.jsx("input",{type:"date",value:l.tanggalTerbit,onChange:t=>s(a=>({...a,tanggalTerbit:t.target.value})),className:"w-full px-4 py-2 border border-gray-300 rounded-md",required:!0})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Gambar (Opsional)"}),e.jsx("input",{type:"file",accept:"image/*",onChange:p,className:"w-full px-4 py-2 border border-gray-300 rounded-md"}),l.imageUrl&&e.jsx("img",{src:l.imageUrl,alt:"Preview",className:"mt-2 w-full h-32 object-cover rounded"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{type:"submit",className:"flex-1 bg-dark-teal text-white px-4 py-2 rounded-lg hover:bg-teal-700 transition-colors",children:n?"Update":"Simpan"}),e.jsx("button",{type:"button",onClick:()=>{i(!1),d(null),s({judul:"",konten:"",tanggalTerbit:new Date().toISOString().split("T")[0],imageUrl:""})},className:"flex-1 bg-gray-300 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-400 transition-colors",children:"Batal"})]})]})]})})]})};export{E as default};
