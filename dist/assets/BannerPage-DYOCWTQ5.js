import{j as e,D as N,ai as k,aj as w,ak as U,al as A}from"./index-BJNlBc_g.js";import{r}from"./charts-vendor-DhOxG2_S.js";import{r as B}from"./file-C-CVBF3a.js";import"./react-vendor-Bzgz95E1.js";const L=()=>{const[g,o]=r.useState([]),[h,i]=r.useState(!1),[n,d]=r.useState(null),[b,m]=r.useState(!0),[s,l]=r.useState({judul:"",imageUrl:"",linkUrl:"",urutan:1,isActive:!0}),c=async()=>{m(!0);try{const a=await k();o(a)}catch(a){console.error("Error loading banners:",a),o([])}finally{m(!1)}};r.useEffect(()=>{c()},[]);const p=async a=>{var x;const t=(x=a.target.files)==null?void 0:x[0];if(t)try{const u=await B(t);l(v=>({...v,imageUrl:u}))}catch(u){console.error("Error reading image file:",u),alert("Gagal membaca file gambar.")}},f=async a=>{if(a.preventDefault(),!s.judul||!s.imageUrl){alert("Judul dan gambar wajib diisi.");return}n?await U({...s,id:n.id})?(await c(),d(null),i(!1),l({judul:"",imageUrl:"",linkUrl:"",urutan:1,isActive:!0})):alert("Gagal mengupdate banner."):await A(s)?(await c(),i(!1),l({judul:"",imageUrl:"",linkUrl:"",urutan:1,isActive:!0})):alert("Gagal menambahkan banner.")},j=a=>{d(a),l({judul:a.judul,imageUrl:a.imageUrl,linkUrl:a.linkUrl||"",urutan:a.urutan,isActive:a.isActive}),i(!0)},y=async a=>{window.confirm("Apakah Anda yakin ingin menghapus banner ini?")&&(await w(a)?await c():alert("Gagal menghapus banner."))};return b?e.jsx("div",{className:"p-6 text-center",children:"Loading banners..."}):e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Kelola Banner"}),e.jsx("button",{onClick:()=>{d(null),l({judul:"",imageUrl:"",linkUrl:"",urutan:1,isActive:!0}),i(!0)},className:"bg-dark-teal text-white px-4 py-2 rounded-lg hover:bg-teal-700 transition-colors",children:"+ Tambah Banner"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:g.map(a=>e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-4 border border-gray-200",children:[e.jsx("img",{src:N(a.imageUrl),alt:a.judul,className:"w-full h-32 object-cover rounded-lg mb-2"}),e.jsx("h3",{className:"font-semibold text-gray-800 mb-1",children:a.judul}),e.jsxs("p",{className:"text-sm text-gray-600 mb-2",children:["Urutan: ",a.urutan]}),e.jsxs("p",{className:"text-sm text-gray-600 mb-2",children:["Status: ",a.isActive?"Aktif":"Tidak Aktif"]}),e.jsxs("div",{className:"flex gap-2 mt-4",children:[e.jsx("button",{onClick:()=>j(a),className:"flex-1 bg-blue-500 text-white px-3 py-1 rounded hover:bg-blue-600 transition-colors text-sm",children:"Edit"}),e.jsx("button",{onClick:()=>y(a.id),className:"flex-1 bg-red-500 text-white px-3 py-1 rounded hover:bg-red-600 transition-colors text-sm",children:"Hapus"})]})]},a.id))}),h&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full mx-4 max-h-[90vh] overflow-y-auto",children:[e.jsx("h3",{className:"text-xl font-bold mb-4",children:n?"Edit Banner":"Tambah Banner"}),e.jsxs("form",{onSubmit:f,children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Judul"}),e.jsx("input",{type:"text",value:s.judul,onChange:a=>l(t=>({...t,judul:a.target.value})),className:"w-full px-4 py-2 border border-gray-300 rounded-md",required:!0})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Gambar"}),e.jsx("input",{type:"file",accept:"image/*",onChange:p,className:"w-full px-4 py-2 border border-gray-300 rounded-md",required:!n}),s.imageUrl&&e.jsx("img",{src:s.imageUrl,alt:"Preview",className:"mt-2 w-full h-32 object-cover rounded"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Link URL (Opsional)"}),e.jsx("input",{type:"url",value:s.linkUrl,onChange:a=>l(t=>({...t,linkUrl:a.target.value})),className:"w-full px-4 py-2 border border-gray-300 rounded-md"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Urutan"}),e.jsx("input",{type:"number",value:s.urutan,onChange:a=>l(t=>({...t,urutan:parseInt(a.target.value)||1})),className:"w-full px-4 py-2 border border-gray-300 rounded-md",min:"1"})]}),e.jsx("div",{className:"mb-4",children:e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:s.isActive,onChange:a=>l(t=>({...t,isActive:a.target.checked})),className:"mr-2"}),e.jsx("span",{className:"text-sm text-gray-700",children:"Aktif"})]})}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{type:"submit",className:"flex-1 bg-dark-teal text-white px-4 py-2 rounded-lg hover:bg-teal-700 transition-colors",children:n?"Update":"Simpan"}),e.jsx("button",{type:"button",onClick:()=>{i(!1),d(null),l({judul:"",imageUrl:"",linkUrl:"",urutan:1,isActive:!0})},className:"flex-1 bg-gray-300 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-400 transition-colors",children:"Batal"})]})]})]})})]})};export{L as default};
