import{j as e,y as k,ad as w,ae as U,o as l,af as A,ag as B}from"./index-CRlvnyeZ.js";import{r as i}from"./charts-vendor-DhOxG2_S.js";import{r as C}from"./file-C-CVBF3a.js";import"./react-vendor-Bzgz95E1.js";const I=()=>{const[h,m]=i.useState([]),[b,n]=i.useState(!1),[d,c]=i.useState(null),[p,g]=i.useState(!0),[t,r]=i.useState({judul:"",imageUrl:"",linkUrl:"",urutan:1,isActive:!0}),u=async()=>{g(!0);try{const a=await w();m(a)}catch(a){console.error("Error loading banners:",a),m([])}finally{g(!1)}};i.useEffect(()=>{u()},[]);const f=async a=>{var x;const s=(x=a.target.files)==null?void 0:x[0];if(s)try{const o=await C(s);r(N=>({...N,imageUrl:o}))}catch(o){console.error("Error reading image file:",o),l.error("Gagal membaca file gambar.")}},j=async a=>{if(a.preventDefault(),!t.judul||!t.imageUrl){l.error("Judul dan gambar wajib diisi.");return}d?await A({...t,id:d.id})?(await u(),c(null),n(!1),r({judul:"",imageUrl:"",linkUrl:"",urutan:1,isActive:!0}),l.success("Banner berhasil diperbarui!")):l.error("Gagal mengupdate banner."):await B(t)?(await u(),n(!1),r({judul:"",imageUrl:"",linkUrl:"",urutan:1,isActive:!0}),l.success("Banner berhasil ditambahkan!")):l.error("Gagal menambahkan banner.")},y=a=>{c(a),r({judul:a.judul,imageUrl:a.imageUrl,linkUrl:a.linkUrl||"",urutan:a.urutan,isActive:a.isActive}),n(!0)},v=async a=>{window.confirm("Apakah Anda yakin ingin menghapus banner ini?")&&(await U(a)?(await u(),l.success("Banner berhasil dihapus!")):l.error("Gagal menghapus banner."))};return p?e.jsx("div",{className:"p-6 text-center",children:"Loading banners..."}):e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Kelola Banner"}),e.jsx("button",{onClick:()=>{c(null),r({judul:"",imageUrl:"",linkUrl:"",urutan:1,isActive:!0}),n(!0)},className:"bg-dark-teal text-white px-4 py-2 rounded-lg hover:bg-teal-700 transition-colors",children:"+ Tambah Banner"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:h.map(a=>e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-4 border border-gray-200",children:[e.jsx("img",{src:k(a.imageUrl),alt:a.judul,className:"w-full h-32 object-cover rounded-lg mb-2"}),e.jsx("h3",{className:"font-semibold text-gray-800 mb-1",children:a.judul}),e.jsxs("p",{className:"text-sm text-gray-600 mb-2",children:["Urutan: ",a.urutan]}),e.jsxs("p",{className:"text-sm text-gray-600 mb-2",children:["Status: ",a.isActive?"Aktif":"Tidak Aktif"]}),e.jsxs("div",{className:"flex gap-2 mt-4",children:[e.jsx("button",{onClick:()=>y(a),className:"flex-1 bg-blue-500 text-white px-3 py-1 rounded hover:bg-blue-600 transition-colors text-sm",children:"Edit"}),e.jsx("button",{onClick:()=>v(a.id),className:"flex-1 bg-red-500 text-white px-3 py-1 rounded hover:bg-red-600 transition-colors text-sm",children:"Hapus"})]})]},a.id))}),b&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full mx-4 max-h-[90vh] overflow-y-auto",children:[e.jsx("h3",{className:"text-xl font-bold mb-4",children:d?"Edit Banner":"Tambah Banner"}),e.jsxs("form",{onSubmit:j,children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Judul"}),e.jsx("input",{type:"text",value:t.judul,onChange:a=>r(s=>({...s,judul:a.target.value})),className:"w-full px-4 py-2 border border-gray-300 rounded-md",required:!0})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Gambar"}),e.jsx("input",{type:"file",accept:"image/*",onChange:f,className:"w-full px-4 py-2 border border-gray-300 rounded-md",required:!d}),t.imageUrl&&e.jsx("img",{src:t.imageUrl,alt:"Preview",className:"mt-2 w-full h-32 object-cover rounded"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Urutan"}),e.jsx("input",{type:"number",value:t.urutan,onChange:a=>r(s=>({...s,urutan:parseInt(a.target.value)||1})),className:"w-full px-4 py-2 border border-gray-300 rounded-md",min:"1"})]}),e.jsx("div",{className:"mb-4",children:e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:t.isActive,onChange:a=>r(s=>({...s,isActive:a.target.checked})),className:"mr-2"}),e.jsx("span",{className:"text-sm text-gray-700",children:"Aktif"})]})}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{type:"submit",className:"flex-1 bg-dark-teal text-white px-4 py-2 rounded-lg hover:bg-teal-700 transition-colors",children:d?"Update":"Simpan"}),e.jsx("button",{type:"button",onClick:()=>{n(!1),c(null),r({judul:"",imageUrl:"",linkUrl:"",urutan:1,isActive:!0})},className:"flex-1 bg-gray-300 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-400 transition-colors",children:"Batal"})]})]})]})})]})};export{I as default};
