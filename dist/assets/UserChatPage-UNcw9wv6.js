import{j as e,C as u,aq as b,U as m,al as j,am as N,an as w}from"./index-DnDJVwWd.js";import{r as a}from"./charts-vendor-DhOxG2_S.js";import"./react-vendor-Bzgz95E1.js";const C=({user:t,onBack:x})=>{const[r,c]=a.useState(""),[n,h]=a.useState([]),d=a.useRef(null),[o,p]=a.useState(!0),i=async()=>{const f=(await N()).filter(l=>l.sender===t.username||l.sender===t.namaLengkap||l.sender==="Admin");h(f),p(!1)};a.useEffect(()=>{i();const s=setInterval(i,3e3);return()=>clearInterval(s)},[t.username,t.namaLengkap]),a.useEffect(()=>{var s;(s=d.current)==null||s.scrollIntoView({behavior:"smooth"})},[n]);const g=async s=>{s.preventDefault(),r.trim()&&(await w({sender:t.username,message:r,isAdmin:!1}),c(""),i())};return e.jsxs("div",{className:"bg-gray-100 min-h-screen font-sans flex flex-col",children:[e.jsxs("header",{className:"bg-dark-teal text-white p-4 flex justify-between items-center sticky top-0 z-10",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(u,{className:"w-7 h-7"}),e.jsx("h1",{className:"text-xl font-semibold",children:"Chat dengan Admin"})]}),e.jsxs("button",{onClick:x,className:"flex items-center space-x-1 hover:bg-white/10 p-2 rounded-md",children:[e.jsx(b,{className:"w-6 h-6"}),e.jsx("span",{className:"text-sm",children:"Kembali"})]})]}),e.jsx("main",{className:"flex-grow p-4 pb-24",children:e.jsxs("div",{className:"space-y-4",children:[n.map(s=>e.jsxs("div",{className:`flex items-start space-x-3 ${s.isAdmin?"":"justify-end"}`,children:[s.isAdmin&&e.jsx(m,{className:"h-8 w-8 text-dark-teal flex-shrink-0 mt-1"}),e.jsxs("div",{className:`px-4 py-2 rounded-2xl max-w-sm sm:max-w-md ${s.isAdmin?"bg-white text-gray-700 border border-gray-200 rounded-bl-none":"bg-dark-teal text-white rounded-br-none"}`,children:[e.jsx("p",{children:s.message}),e.jsx("p",{className:"text-xs opacity-60 mt-1 text-right",children:new Date(s.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]}),!s.isAdmin&&e.jsx(m,{className:"h-8 w-8 text-gray-400 flex-shrink-0 mt-1"})]},s.id)),n.length===0&&!o&&e.jsx("p",{className:"text-center text-gray-500 pt-10",children:"Mulai percakapan dengan admin."}),o&&n.length===0&&e.jsx("p",{className:"text-center text-gray-500 pt-10",children:"Loading chat..."}),e.jsx("div",{ref:d})]})}),e.jsx("footer",{className:"fixed bottom-0 left-0 right-0 bg-white shadow-[0_-2px_5px_rgba(0,0,0,0.1)] p-2",children:e.jsxs("form",{onSubmit:g,className:"flex items-center space-x-3 p-2",children:[e.jsx("input",{type:"text",value:r,onChange:s=>c(s.target.value),placeholder:"Ketik pesan...",className:"w-full px-4 py-3 text-gray-700 bg-gray-100 border border-gray-300 rounded-full focus:outline-none focus:ring-2 focus:ring-dark-teal"}),e.jsx("button",{type:"submit",className:"text-white bg-dark-teal p-3 rounded-full hover:bg-opacity-90","aria-label":"Kirim Pesan",children:e.jsx(j,{className:"h-6 w-6"})})]})})]})};export{C as default};
