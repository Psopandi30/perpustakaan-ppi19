const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/UserRadioStreamingPage-BZ5S5X0M.js","assets/index-RsgQjp0y.js","assets/charts-vendor-DhOxG2_S.js","assets/react-vendor-Bzgz95E1.js","assets/index-DqZ_Deei.css","assets/UserChatPage-CGxzDOm3.js","assets/UserAccountPage-pnwHYf7P.js","assets/file-C-CVBF3a.js","assets/UserBulletinPage-mtB-qoqk.js","assets/UserHadithPage-D-jaCWoW.js","assets/UserQuranPage-BRAg4qy9.js","assets/UserWrittenWorkPage-DnUEKuNq.js","assets/UserGeneralBookPage-BAbxeCmL.js","assets/UserMateriDakwahPage-Dv4gAxeT.js","assets/UserKaryaAsatidzPage-BMrCAvwO.js","assets/UserKhutbahJumatPage-OzDEs2gB.js"])))=>i.map(i=>d[i]);
import{j as e,X as D,U as S,e as E,f as M,g as T,d as n,m as C,h as z,R as v,B as U,Q as B,H as L,W as O,b as V,F as H,G as $,S as F,C as K,i as Q,a as W,_ as r}from"./index-RsgQjp0y.js";import{r as s}from"./charts-vendor-DhOxG2_S.js";import"./react-vendor-Bzgz95E1.js";const q=({notifications:l,onClose:b,onMarkAsRead:g,onMarkAllAsRead:p})=>{const d=l.filter(a=>!a.isRead).length,k=a=>{switch(a){case"live-streaming":return"ðŸ“º";case"buletin":return"ðŸ“°";case"karya-tulis":return"âœï¸";case"buku-umum":return"ðŸ“š";case"karya-asatidz":return"ðŸŽ“";case"materi-dakwah":return"ðŸ“";case"khutbah-jumat":return"ðŸ•Œ";case"informasi":return"â„¹ï¸";default:return"ðŸ””"}},m=a=>{const f=new Date().getTime()-new Date(a).getTime(),x=Math.floor(f/6e4),u=Math.floor(x/60),h=Math.floor(u/24);return x<1?"Baru saja":x<60?`${x} menit yang lalu`:u<24?`${u} jam yang lalu`:h<7?`${h} hari yang lalu`:new Date(a).toLocaleDateString("id-ID")};return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex justify-end",children:e.jsxs("div",{className:"bg-white w-full max-w-md h-full shadow-xl flex flex-col",children:[e.jsxs("div",{className:"bg-dark-teal text-white p-4 flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"text-xl",children:"ðŸ””"}),e.jsx("h2",{className:"text-xl font-semibold",children:"Notifikasi"}),d>0&&e.jsx("span",{className:"bg-red-500 text-white text-xs font-bold px-2 py-1 rounded-full",children:d})]}),e.jsx("button",{onClick:b,className:"text-white hover:text-gray-200",children:e.jsx(D,{className:"h-6 w-6"})})]}),d>0&&e.jsx("div",{className:"px-4 py-2 bg-gray-50 border-b",children:e.jsx("button",{onClick:p,className:"text-sm text-dark-teal hover:underline",children:"Tandai semua sudah dibaca"})}),e.jsx("div",{className:"flex-1 overflow-y-auto",children:l.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-gray-400 p-8",children:[e.jsx("span",{className:"text-6xl mb-4",children:"ðŸ””"}),e.jsx("p",{className:"text-lg",children:"Tidak ada notifikasi"})]}):e.jsx("div",{className:"divide-y divide-gray-200",children:[...l].sort((a,i)=>new Date(i.timestamp).getTime()-new Date(a.timestamp).getTime()).map(a=>e.jsx("div",{className:`p-4 hover:bg-gray-50 cursor-pointer transition-colors ${a.isRead?"":"bg-blue-50"}`,onClick:()=>!a.isRead&&g(a.id),children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("span",{className:"text-2xl flex-shrink-0",children:k(a.type)}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsx("h3",{className:`font-semibold text-gray-900 ${a.isRead?"":"font-bold"}`,children:a.title}),!a.isRead&&e.jsx("span",{className:"w-2 h-2 bg-blue-500 rounded-full flex-shrink-0 mt-2"})]}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:a.message}),e.jsx("p",{className:"text-xs text-gray-400 mt-2",children:m(a.timestamp)})]})]})},a.id))})})]})})},G=s.lazy(()=>r(()=>import("./UserRadioStreamingPage-BZ5S5X0M.js"),__vite__mapDeps([0,1,2,3,4]))),J=s.lazy(()=>r(()=>import("./UserChatPage-CGxzDOm3.js"),__vite__mapDeps([5,1,2,3,4]))),X=s.lazy(()=>r(()=>import("./UserAccountPage-pnwHYf7P.js"),__vite__mapDeps([6,1,2,3,4,7]))),Y=s.lazy(()=>r(()=>import("./UserBulletinPage-mtB-qoqk.js"),__vite__mapDeps([8,1,2,3,4]))),Z=s.lazy(()=>r(()=>import("./UserHadithPage-D-jaCWoW.js"),__vite__mapDeps([9,1,2,3,4]))),ee=s.lazy(()=>r(()=>import("./UserQuranPage-BRAg4qy9.js"),__vite__mapDeps([10,1,2,3,4]))),ae=s.lazy(()=>r(()=>import("./UserWrittenWorkPage-DnUEKuNq.js"),__vite__mapDeps([11,1,2,3,4]))),se=s.lazy(()=>r(()=>import("./UserGeneralBookPage-BAbxeCmL.js"),__vite__mapDeps([12,1,2,3,4]))),te=s.lazy(()=>r(()=>import("./UserMateriDakwahPage-Dv4gAxeT.js"),__vite__mapDeps([13,1,2,3,4]))),le=s.lazy(()=>r(()=>import("./UserKaryaAsatidzPage-BMrCAvwO.js"),__vite__mapDeps([14,1,2,3,4]))),ne=s.lazy(()=>r(()=>import("./UserKhutbahJumatPage-OzDEs2gB.js"),__vite__mapDeps([15,1,2,3,4]))),re=[{id:"radio",label:"Live Streaming",icon:v},{id:"bulletin",label:"Buletin",icon:U},{id:"quran",label:"Al-Quran",icon:B},{id:"hadist",label:"Hadist",icon:L},{id:"karya-tulis",label:"Karya Tulis Santri",icon:O},{id:"buku-umum",label:"Buku Umum",icon:V},{id:"materi-dakwah",label:"Materi Dakwah",icon:H},{id:"karya-asatidz",label:"Karya Ulama",icon:$},{id:"khutbah-jumat",label:"Khutbah Jum'at",icon:F},{id:"chat-admin",label:"Chat admin",icon:K}],me=({user:l,onLogout:b,onUpdateUser:g,settings:p})=>{const[d,k]=s.useState({day:"",date:""}),[m,a]=s.useState("home"),[i,f]=s.useState([]),[x,u]=s.useState(!1),[h,_]=s.useState(null),[w,ie]=s.useState(!1),N=i.filter(t=>!t.isRead).length;s.useEffect(()=>{const t=new Date,c=new Intl.DateTimeFormat("id-ID",{weekday:"long"}).format(t),o=new Intl.DateTimeFormat("id-ID",{day:"numeric",month:"long",year:"numeric"}).format(t);k({day:c,date:o})},[]),s.useEffect(()=>{const t=async()=>{const o=await M();f(o);const y=await T();y.length>0&&_(y[y.length-1])};t();const c=setInterval(t,1e4);return()=>clearInterval(c)},[l.id]);const I=async t=>{await z(t);const c=i.map(o=>o.id===t?{...o,isRead:!0}:o);f(c)},R=async()=>{await C();const t=i.map(c=>({...c,isRead:!0}));f(t)},j=t=>{t==="chat-admin"||t==="chat"?a("chat"):t==="account"?a("account"):["radio","bulletin","hadist","quran","karya-tulis","buku-umum","materi-dakwah","karya-asatidz","khutbah-jumat"].includes(t)?a(t):a("home")},A=()=>e.jsxs(e.Fragment,{children:[e.jsxs("main",{className:"flex-grow px-4 pb-24",children:[e.jsx("div",{className:"bg-white rounded-2xl shadow-md p-4 -mt-8 mx-2",children:e.jsxs("div",{className:"flex justify-between items-center text-dark-teal",children:[e.jsxs("div",{className:"text-left shrink-0",children:[e.jsx("p",{className:"font-bold text-sm md:text-base",children:d.day}),e.jsx("p",{className:"text-xs text-gray-600",children:d.date})]}),e.jsx("div",{className:"text-right flex-1 pl-4",children:e.jsx("p",{className:"font-bold text-xs md:text-sm uppercase leading-tight",children:p.libraryName})})]})}),e.jsxs("div",{className:"mt-6",children:[e.jsx("h2",{className:"text-center font-semibold text-gray-600 border-b pb-2 mb-4",children:"Dashboard"}),e.jsx("div",{className:"grid grid-cols-4 sm:grid-cols-5 gap-4 text-center",children:re.map(t=>e.jsxs("button",{onClick:()=>j(t.id),className:"relative flex flex-col items-center justify-start p-2 space-y-2 hover:bg-gray-200 rounded-lg transition-colors",children:[e.jsx("div",{className:"w-12 h-12 bg-dark-teal text-white rounded-lg flex items-center justify-center",children:e.jsx(t.icon,{className:"w-7 h-7"})}),e.jsx("span",{className:"text-xs text-gray-700 font-medium",children:t.label}),t.id==="chat-admin"&&w&&e.jsx("span",{className:"absolute top-1 right-1 w-3 h-3 bg-red-500 rounded-full border-2 border-white"})]},t.id))})]}),e.jsxs("div",{className:"mt-8",children:[e.jsx("h3",{className:"font-bold text-dark-teal",children:"INFORMASI PERPUSTAKAAN"}),e.jsx("p",{className:"text-sm text-gray-600 mt-2",children:h?`${h.judul} - ${h.isi}`:"Tidak ada informasi terbaru."})]}),e.jsx("div",{className:"mt-6 mx-2 bg-yellow-50 border-l-4 border-yellow-400 p-4 rounded-r-lg",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("svg",{className:"h-5 w-5 text-yellow-400",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})})}),e.jsxs("div",{className:"ml-3 flex-1",children:[e.jsx("p",{className:"text-sm text-yellow-700 font-medium",children:"âš ï¸ Informasi Penting"}),e.jsxs("p",{className:"text-xs text-yellow-600 mt-1",children:["Untuk melihat konten terbaru dari admin (buletin, jurnal, skripsi, informasi, dll), silakan ",e.jsx("strong",{children:"refresh halaman"})," dengan menekan tombol Home atau reload browser."]}),e.jsx("button",{onClick:()=>window.location.reload(),className:"mt-2 text-xs bg-yellow-400 text-yellow-900 px-3 py-1 rounded-md hover:bg-yellow-500 transition-colors font-medium",children:"Refresh Sekarang"})]})]})})]}),e.jsx("footer",{className:"fixed bottom-0 left-0 right-0 bg-white shadow-[0_-2px_5px_rgba(0,0,0,0.1)] rounded-t-2xl",children:e.jsxs("div",{className:"flex justify-around items-center p-2",children:[e.jsxs("button",{onClick:()=>j("radio"),className:"flex flex-col items-center text-gray-500 hover:text-dark-teal transition-colors space-y-1",children:[e.jsx(v,{className:"w-7 h-7"}),e.jsx("span",{className:"text-xs",children:"Live Streaming"})]}),e.jsxs("button",{onClick:()=>j("home"),className:`flex flex-col items-center transition-colors space-y-1 ${m==="home"?"text-dark-teal":"text-gray-500 hover:text-dark-teal"}`,children:[e.jsx(Q,{className:"w-7 h-7"}),e.jsx("span",{className:`text-xs ${m==="home"?"font-bold":""}`,children:"Home"})]}),e.jsxs("button",{onClick:()=>j("account"),className:"relative flex flex-col items-center text-gray-500 hover:text-dark-teal transition-colors space-y-1",children:[e.jsx(W,{className:"w-7 h-7"}),e.jsx("span",{className:"text-xs",children:"Akun Saya"}),w&&e.jsx("span",{className:"absolute top-0 right-3 w-3 h-3 bg-red-500 rounded-full border-2 border-white"})]})]})})]}),P=()=>{switch(m){case"radio":return e.jsx(s.Suspense,{fallback:e.jsx(n,{message:"Memuat live streaming..."}),children:e.jsx(G,{user:l,onBack:()=>a("home")})});case"chat":return e.jsx(s.Suspense,{fallback:e.jsx(n,{message:"Memuat chat..."}),children:e.jsx(J,{user:l,onBack:()=>a("home")})});case"account":return e.jsx(s.Suspense,{fallback:e.jsx(n,{message:"Memuat akun..."}),children:e.jsx(X,{user:l,onLogout:b,onNavigate:j,onUpdateUser:g})});case"bulletin":return e.jsx(s.Suspense,{fallback:e.jsx(n,{message:"Memuat buletin..."}),children:e.jsx(Y,{onBack:()=>a("home")})});case"hadist":return e.jsx(s.Suspense,{fallback:e.jsx(n,{message:"Memuat hadist..."}),children:e.jsx(Z,{onBack:()=>a("home")})});case"quran":return e.jsx(s.Suspense,{fallback:e.jsx(n,{message:"Memuat Al-Quran..."}),children:e.jsx(ee,{onBack:()=>a("home")})});case"karya-tulis":return e.jsx(s.Suspense,{fallback:e.jsx(n,{message:"Memuat karya tulis..."}),children:e.jsx(ae,{onBack:()=>a("home")})});case"buku-umum":return e.jsx(s.Suspense,{fallback:e.jsx(n,{message:"Memuat buku umum..."}),children:e.jsx(se,{onBack:()=>a("home")})});case"materi-dakwah":return e.jsx(s.Suspense,{fallback:e.jsx(n,{message:"Memuat materi dakwah..."}),children:e.jsx(te,{onBack:()=>a("home")})});case"karya-asatidz":return e.jsx(s.Suspense,{fallback:e.jsx(n,{message:"Memuat karya asatidz..."}),children:e.jsx(le,{onBack:()=>a("home")})});case"khutbah-jumat":return e.jsx(s.Suspense,{fallback:e.jsx(n,{message:"Memuat khutbah jumat..."}),children:e.jsx(ne,{onBack:()=>a("home")})});case"home":default:return A()}};return e.jsxs("div",{className:"bg-gray-100 min-h-screen font-sans flex flex-col",children:[m==="home"&&e.jsx("header",{className:"bg-dark-teal text-white p-4 pb-12 rounded-b-3xl shadow-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"w-16 h-16 bg-white rounded-full flex items-center justify-center overflow-hidden",children:l.photo?e.jsx("img",{src:l.photo,alt:l.namaLengkap,className:"w-full h-full object-cover"}):e.jsx(S,{className:"w-12 h-12 text-dark-teal"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-[10px]",children:"Assalamualaikum"}),e.jsx("h1",{className:"text-sm font-bold uppercase",children:l.namaLengkap})]})]}),e.jsxs("button",{onClick:()=>u(!0),className:"relative p-2 hover:bg-white/10 rounded-full transition-colors",children:[e.jsx(E,{className:"w-7 h-7"}),N>0&&e.jsx("span",{className:"absolute top-0 right-0 w-5 h-5 bg-red-500 text-white text-xs font-bold rounded-full flex items-center justify-center",children:N>9?"9+":N})]})]})}),P(),x&&e.jsx(q,{notifications:i,onClose:()=>u(!1),onMarkAsRead:I,onMarkAllAsRead:R})]})};export{me as default};
