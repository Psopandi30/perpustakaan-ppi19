import{j as e,R as f,s as p,i as g,aq as b,r as y}from"./index-RsgQjp0y.js";import{r as i}from"./charts-vendor-DhOxG2_S.js";import"./react-vendor-Bzgz95E1.js";const k=({user:w,onBack:c})=>{const[l,m]=i.useState([]),[u,h]=i.useState(!0),o=async()=>{const s=(await y()).filter(a=>a.isActive).sort((a,r)=>a.order-r.order);m(s),h(!1)};i.useEffect(()=>{o();const t=setInterval(o,1e4);return()=>clearInterval(t)},[]);const d=t=>{const s=/^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|&v=)([^#&?]*).*/,a=t.match(s);return a&&a[2].length===11?a[2]:null},x=(()=>{if(l.length===0)return null;const t=l.map(n=>d(n.youtubeLink)).filter(n=>n!==null);if(t.length===0)return null;const s=t[0],a=t.slice(1).join(",");let r=`https://www.youtube.com/embed/${s}?autoplay=1&mute=1`;return a&&(r+=`&playlist=${a}&loop=1`),r})();return e.jsxs("div",{className:"bg-gray-100 min-h-screen font-sans flex flex-col",children:[e.jsx("header",{className:"bg-dark-teal text-white p-4 flex justify-between items-center",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(f,{className:"w-7 h-7"}),e.jsx("h1",{className:"text-xl font-semibold",children:"Live Streaming"})]})}),e.jsxs("main",{className:"flex-grow p-4 space-y-4 pb-20",children:[e.jsx("div",{className:"aspect-video bg-black border-4 border-white rounded-lg flex items-center justify-center text-white overflow-hidden shadow-lg",children:x?e.jsx("iframe",{className:"w-full h-full",src:x,title:"YouTube video player",frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0}):e.jsx("div",{className:"text-center p-8",children:u?e.jsx("p",{children:"Memuat playlist..."}):e.jsxs(e.Fragment,{children:[e.jsx(p,{className:"w-16 h-16 text-white opacity-50 mx-auto"}),e.jsx("p",{className:"mt-4 text-lg",children:"Belum ada siaran yang aktif saat ini."}),e.jsx("p",{className:"text-sm text-gray-400 mt-2",children:"Silakan tunggu admin memulai siaran."})]})})}),l.length>0&&(()=>{const t=d(l[0].youtubeLink),s=typeof window<"u"?window.location.hostname:"";return t&&s?e.jsxs("div",{className:"bg-white rounded-lg shadow border border-gray-200 overflow-hidden h-96 flex flex-col",children:[e.jsxs("h3",{className:"font-bold text-gray-800 p-3 border-b bg-gray-50 flex items-center gap-2",children:[e.jsx("span",{className:"w-2 h-2 bg-red-500 rounded-full animate-pulse"}),"Live Chat YouTube"]}),e.jsx("iframe",{src:`https://www.youtube.com/live_chat?v=${t}&embed_domain=${s}`,className:"w-full flex-grow border-none",title:"Live Chat"})]}):null})(),l.length>0&&e.jsxs("div",{className:"bg-white p-4 rounded-lg shadow border border-gray-200",children:[e.jsx("h3",{className:"font-bold text-gray-800 mb-2 border-b pb-2",children:"Daftar Putar"}),e.jsx("ul",{className:"space-y-2",children:l.map((t,s)=>e.jsxs("li",{className:"flex items-center space-x-3 text-sm text-gray-700",children:[e.jsx("span",{className:"bg-gray-200 text-gray-600 rounded-full w-6 h-6 flex items-center justify-center text-xs font-bold flex-shrink-0",children:s+1}),e.jsx("span",{className:"truncate",children:t.title})]},t.id))})]})]}),e.jsx("footer",{className:"fixed bottom-0 left-0 right-0 bg-white shadow-[0_-2px_5px_rgba(0,0,0,0.1)] rounded-t-2xl",children:e.jsxs("div",{className:"flex justify-around items-center p-2",children:[e.jsxs("button",{onClick:c,className:"flex flex-col items-center text-dark-teal transition-colors space-y-1",children:[e.jsx(g,{className:"w-7 h-7"}),e.jsx("span",{className:"text-xs font-bold",children:"Home"})]}),e.jsxs("button",{onClick:c,className:"flex flex-col items-center text-gray-500 hover:text-dark-teal transition-colors space-y-1",children:[e.jsx(b,{className:"w-7 h-7"}),e.jsx("span",{className:"text-xs",children:"Keluar"})]})]})})]})};export{k as default};
