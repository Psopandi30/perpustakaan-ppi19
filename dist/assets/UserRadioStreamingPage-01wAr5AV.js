import{at as b,j as e,R as f,r as p,t as j,U as m,v as g,i as w,au as y,w as N,A as v}from"./index-BJNlBc_g.js";import{r as a}from"./charts-vendor-DhOxG2_S.js";import"./react-vendor-Bzgz95E1.js";const C=({user:x,onBack:l})=>{const[t,u]=a.useState({title:"",youtubeLink:"",whatsappLink:"",isPublished:!1,messages:[]}),i=b(t.youtubeLink),[c,n]=a.useState(""),o=a.useRef(null),r=async()=>{const s=await N();u(s)};a.useEffect(()=>{r();const s=setInterval(r,3e3);return()=>clearInterval(s)},[]),a.useEffect(()=>{var s;(s=o.current)==null||s.scrollIntoView({behavior:"smooth"})},[t.messages]);const h=async s=>{s.preventDefault();const d=c.trim();d&&(await v({sender:x.namaLengkap,message:d,isAdmin:!1}),n(""),r())};return e.jsxs("div",{className:"bg-gray-100 min-h-screen font-sans flex flex-col",children:[e.jsx("header",{className:"bg-dark-teal text-white p-4 flex justify-between items-center",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(f,{className:"w-7 h-7"}),e.jsx("h1",{className:"text-xl font-semibold",children:"Live Streaming"})]})}),e.jsxs("main",{className:"flex-grow p-4 space-y-4 pb-20",children:[e.jsx("div",{className:"aspect-video bg-black border-4 border-white rounded-lg flex items-center justify-center text-white overflow-hidden",children:t.isPublished&&i?e.jsx("iframe",{className:"w-full h-full",src:i,title:"YouTube video player",frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0}):e.jsxs("div",{className:"text-center",children:[e.jsx(p,{className:"w-16 h-16 text-white opacity-50 mx-auto"}),e.jsx("p",{className:"mt-2 text-sm",children:"Siaran akan segera dimulai..."})]})}),e.jsxs("div",{className:"flex-grow flex flex-col pt-4 min-h-0",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[e.jsx(j,{className:"h-6 w-6 text-gray-600"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-700",children:"Live Chat"})]}),e.jsx("div",{className:"flex-grow bg-white p-3 rounded-lg border border-gray-200 h-64 overflow-y-auto custom-scrollbar",children:e.jsxs("div",{className:"space-y-4",children:[t.messages.map(s=>e.jsxs("div",{className:`flex items-start space-x-3 ${s.isAdmin?"justify-end":""}`,children:[!s.isAdmin&&e.jsx(m,{className:"h-6 w-6 text-gray-400 flex-shrink-0 mt-1"}),e.jsxs("div",{className:`px-4 py-2 rounded-2xl max-w-sm ${s.isAdmin?"bg-teal-100 text-gray-800 rounded-br-none":"bg-white text-gray-700 border border-gray-200 rounded-bl-none"}`,children:[!s.isAdmin&&e.jsx("p",{className:"font-bold text-sm text-dark-teal",children:s.sender}),e.jsx("p",{children:s.message})]}),s.isAdmin&&e.jsx(m,{className:"h-6 w-6 text-dark-teal flex-shrink-0 mt-1"})]},s.id)),e.jsx("div",{ref:o})]})}),e.jsxs("form",{className:"mt-4 flex items-center space-x-3",onSubmit:h,children:[e.jsx("input",{type:"text",value:c,onChange:s=>n(s.target.value),placeholder:"Balas Komentar",className:"w-full px-4 py-3 text-gray-700 bg-white border border-gray-300 rounded-full focus:outline-none focus:ring-2 focus:ring-dark-teal"}),e.jsx("button",{type:"submit",className:"text-dark-teal p-2 rounded-full hover:bg-gray-200","aria-label":"Kirim Komentar",children:e.jsx(g,{className:"h-7 w-7"})})]})]})]}),e.jsx("footer",{className:"fixed bottom-0 left-0 right-0 bg-white shadow-[0_-2px_5px_rgba(0,0,0,0.1)] rounded-t-2xl",children:e.jsxs("div",{className:"flex justify-around items-center p-2",children:[e.jsxs("button",{onClick:l,className:"flex flex-col items-center text-dark-teal transition-colors space-y-1",children:[e.jsx(w,{className:"w-7 h-7"}),e.jsx("span",{className:"text-xs font-bold",children:"Home"})]}),e.jsxs("button",{onClick:l,className:"flex flex-col items-center text-gray-500 hover:text-dark-teal transition-colors space-y-1",children:[e.jsx(y,{className:"w-7 h-7"}),e.jsx("span",{className:"text-xs",children:"Keluar"})]})]})}),e.jsx("style",{children:`
                .custom-scrollbar::-webkit-scrollbar {
                    width: 8px;
                }
                .custom-scrollbar::-webkit-scrollbar-track {
                    background: #f1f1f1;
                    border-radius: 10px;
                }
                .custom-scrollbar::-webkit-scrollbar-thumb {
                    background: #888;
                    border-radius: 10px;
                }
                .custom-scrollbar::-webkit-scrollbar-thumb:hover {
                    background: #555;
                }
            `})]})};export{C as default};
