import{j as e,b as j,R as u,i as g,aq as p,Y as N,y as b,ar as h,as as f}from"./index-DnDJVwWd.js";import{r as i}from"./charts-vendor-DhOxG2_S.js";import"./react-vendor-Bzgz95E1.js";const y=({work:t,onBack:a})=>{const[o,l]=i.useState(!1),r=b(t.coverLink),d=n=>{const c=n.match(/\/d\/(.*?)\/|id=(.*?)(&|$)/),s=c?c[1]||c[2]:null;return s?`https://drive.google.com/file/d/${s}/preview`:n};return o?e.jsxs("div",{className:"bg-gray-100 min-h-screen font-sans flex flex-col",children:[e.jsxs("header",{className:"bg-dark-teal text-white p-4 flex justify-between items-center sticky top-0 z-10 shadow-md",children:[e.jsxs("div",{className:"flex items-center space-x-2 overflow-hidden",children:[e.jsx(h,{className:"w-6 h-6 flex-shrink-0"}),e.jsx("h1",{className:"text-lg font-semibold truncate",children:t.judul})]}),e.jsxs("button",{onClick:()=>l(!1),className:"flex items-center space-x-1 bg-white/20 hover:bg-white/30 px-3 py-1.5 rounded-md transition-colors flex-shrink-0 ml-2",children:[e.jsx(f,{className:"w-5 h-5"}),e.jsx("span",{className:"text-sm",children:"Kembali ke Sampul"})]})]}),e.jsx("main",{className:"flex-grow flex flex-col h-[calc(100vh-64px)]",children:e.jsx("iframe",{src:d(t.drafLink),className:"w-full h-full border-none",title:"PDF Viewer",allow:"autoplay"})})]}):e.jsxs("div",{className:"bg-gray-100 min-h-screen font-sans flex flex-col",children:[e.jsxs("header",{className:"bg-dark-teal text-white p-4 flex justify-between items-center sticky top-0 z-10",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(j,{className:"w-7 h-7"}),e.jsx("h1",{className:"text-xl font-semibold",children:"DAFTAR BUKU UMUM"})]}),e.jsxs("button",{onClick:a,className:"flex items-center space-x-1 hover:bg-white/10 p-2 rounded-md flex-shrink-0",children:[e.jsx(f,{className:"w-6 h-6"}),e.jsx("span",{className:"text-sm hidden sm:inline",children:"Kembali"})]})]}),e.jsx("main",{className:"flex-grow p-4 space-y-4 pb-24",children:e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md border border-gray-200 text-center space-y-6",children:[r?e.jsx("img",{src:r,alt:`Cover ${t.judul}`,className:"mx-auto w-48 h-64 object-cover rounded-lg border-2 border-gray-200 shadow-sm",loading:"lazy"}):e.jsx("div",{className:"w-48 h-64 mx-auto bg-gray-200 rounded-lg flex items-center justify-center text-gray-500 border-2 border-dashed border-gray-300",children:"Tidak ada cover"}),e.jsxs("button",{onClick:()=>l(!0),className:"inline-flex items-center justify-center px-4 py-2 bg-dark-teal text-white rounded-full font-semibold hover:bg-opacity-90 transition-colors","aria-label":`Buka draf untuk ${t.judul}`,children:[e.jsx(h,{className:"w-5 h-5 mr-2"}),e.jsx("span",{children:"Buka draf"})]}),e.jsxs("div",{className:"mt-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-dark-teal",children:t.judul}),e.jsxs("p",{className:"text-md text-gray-600 mt-2",children:["Penulis: ",t.namaPenulis]}),e.jsxs("p",{className:"text-md text-gray-600",children:["Tahun terbit: ",t.tanggalTerbit]})]})]})}),e.jsx("footer",{className:"fixed bottom-0 left-0 right-0 bg-white shadow-[0_-2px_5px_rgba(0,0,0,0.1)] rounded-t-2xl",children:e.jsxs("div",{className:"flex justify-around items-center p-2",children:[e.jsxs("button",{onClick:a,className:"flex flex-col items-center text-gray-500 hover:text-dark-teal transition-colors space-y-1",children:[e.jsx(u,{className:"w-7 h-7"}),e.jsx("span",{className:"text-xs",children:"Live Streaming"})]}),e.jsxs("button",{onClick:a,className:"flex flex-col items-center text-dark-teal transition-colors space-y-1",children:[e.jsx(g,{className:"w-7 h-7"}),e.jsx("span",{className:"text-xs font-bold",children:"Home"})]}),e.jsxs("button",{onClick:a,className:"flex flex-col items-center text-gray-500 hover:text-dark-teal transition-colors space-y-1",children:[e.jsx(p,{className:"w-7 h-7"}),e.jsx("span",{className:"text-xs",children:"Keluar"})]})]})})]})},U=({onBack:t})=>{const[a,o]=i.useState([]),[l,r]=i.useState(null),[d,n]=i.useState(!0);if(i.useEffect(()=>{const s=async()=>{n(!0);try{const m=await N();o(m)}catch(m){console.error("Error loading general books:",m),o([])}finally{n(!1)}};s();const x=setInterval(s,3e4);return()=>clearInterval(x)},[]),l)return e.jsx(y,{work:l,onBack:()=>r(null)});const c=({work:s})=>{const x=b(s.coverLink);return e.jsxs("button",{onClick:()=>r(s),className:"w-full text-left flex items-center space-x-4 p-3 bg-white rounded-lg shadow border border-gray-200 hover:bg-gray-50 transition-colors",children:[x?e.jsx("img",{src:x,alt:`Cover ${s.judul}`,className:"w-16 h-20 rounded-md object-cover flex-shrink-0 border border-gray-200",loading:"lazy"}):e.jsx("div",{className:"w-16 h-20 bg-gray-200 rounded-md flex-shrink-0 flex items-center justify-center text-center text-xs text-gray-500 p-1",children:"Tanpa cover"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-dark-teal",children:s.judul}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Tahun terbit: ",s.tanggalTerbit]}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Penulis: ",s.namaPenulis]})]})]})};return e.jsxs("div",{className:"bg-gray-100 min-h-screen font-sans flex flex-col",children:[e.jsx("header",{className:"bg-dark-teal text-white p-4 flex justify-between items-center sticky top-0 z-10",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(j,{className:"w-7 h-7"}),e.jsx("h1",{className:"text-xl font-semibold",children:"DAFTAR BUKU UMUM"})]})}),e.jsx("main",{className:"flex-grow p-4 space-y-4 pb-24",children:e.jsx("div",{className:"space-y-3",children:d?e.jsx("p",{className:"text-center",children:"Loading skripsi..."}):a.length>0?a.map(s=>e.jsx(c,{work:s},s.id)):e.jsx("p",{className:"text-gray-500 col-span-full text-center mt-8",children:"Belum ada skripsi yang dipublikasikan."})})}),e.jsx("footer",{className:"fixed bottom-0 left-0 right-0 bg-white shadow-[0_-2px_5px_rgba(0,0,0,0.1)] rounded-t-2xl",children:e.jsxs("div",{className:"flex justify-around items-center p-2",children:[e.jsxs("button",{onClick:t,className:"flex flex-col items-center text-gray-500 hover:text-dark-teal transition-colors space-y-1",children:[e.jsx(u,{className:"w-7 h-7"}),e.jsx("span",{className:"text-xs",children:"Live Streaming"})]}),e.jsxs("button",{onClick:t,className:"flex flex-col items-center text-dark-teal transition-colors space-y-1",children:[e.jsx(g,{className:"w-7 h-7"}),e.jsx("span",{className:"text-xs font-bold",children:"Home"})]}),e.jsxs("button",{onClick:t,className:"flex flex-col items-center text-gray-500 hover:text-dark-teal transition-colors space-y-1",children:[e.jsx(p,{className:"w-7 h-7"}),e.jsx("span",{className:"text-xs",children:"Keluar"})]})]})})]})};export{U as default};
