import{j as e,X as y,I as f,P as j,l as w,T as N,g as v,af as k,ag as I,x as S,ah as C}from"./index-BJNlBc_g.js";import{r as o}from"./charts-vendor-DhOxG2_S.js";import{t as p}from"./date-Bvg2Sx2u.js";import"./react-vendor-Bzgz95E1.js";const T=({information:l,onClose:r,onSave:c})=>{const[n,m]=o.useState({...l,tanggal:p(l.tanggal)}),[i,u]=o.useState(null);o.useEffect(()=>{m({...l,tanggal:p(l.tanggal)})},[l]);const h=s=>{const{name:x,value:a}=s.target;m(d=>({...d,[x]:a})),u(null)},g=s=>{if(s.preventDefault(),Object.values(n).some(x=>typeof x=="string"&&x.trim()==="")){u("Semua kolom wajib diisi.");return}c(n)},t=[{name:"judul",label:"Judul Informasi",type:"text"},{name:"tanggal",label:"Tanggal",type:"date"}];return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-40 flex justify-center items-center p-4","aria-modal":"true",role:"dialog",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex justify-between items-center p-4 border-b sticky top-0 bg-white",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"Edit Informasi"}),e.jsx("button",{onClick:r,"aria-label":"Close modal",children:e.jsx(y,{className:"h-6 w-6 text-gray-500 hover:text-gray-800"})})]}),e.jsxs("form",{onSubmit:g,className:"p-6 space-y-4",children:[t.map(s=>e.jsxs("div",{children:[e.jsx("label",{htmlFor:`edit-${s.name}`,className:"block text-sm font-medium text-gray-700 mb-1",children:s.label}),e.jsx("input",{type:s.type,id:`edit-${s.name}`,name:s.name,value:n[s.name],onChange:h,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-dark-teal"})]},s.name)),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"edit-isi",className:"block text-sm font-medium text-gray-700 mb-1",children:"Tulis Informasi"}),e.jsx("textarea",{id:"edit-isi",name:"isi",value:n.isi,onChange:h,rows:4,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-dark-teal"})]}),i&&e.jsx("p",{className:"text-red-500 text-sm",role:"alert",children:i}),e.jsxs("div",{className:"flex justify-end items-center pt-4 space-x-3",children:[e.jsx("button",{type:"button",onClick:r,className:"px-4 py-2 bg-gray-200 text-gray-800 rounded-md hover:bg-gray-300 transition-colors",children:"Batal"}),e.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white font-semibold rounded-md hover:bg-blue-700 transition-colors",children:"Simpan Perubahan"})]})]})]})})},D=({onClose:l,onSave:r})=>{const[c,n]=o.useState({judul:"",tanggal:"",isi:""}),[m,i]=o.useState(null),u=t=>{const{name:s,value:x}=t.target;n(a=>({...a,[s]:x})),i(null)},h=t=>{if(t.preventDefault(),Object.values(c).some(s=>typeof s=="string"&&s.trim()==="")){i("Semua kolom wajib diisi.");return}r(c)},g=[{name:"judul",label:"Judul Informasi",type:"text"},{name:"tanggal",label:"Tanggal",type:"date"}];return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-40 flex justify-center items-center p-4","aria-modal":"true",role:"dialog",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex justify-between items-center p-4 border-b sticky top-0 bg-white",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"Tambah Informasi"}),e.jsx("button",{onClick:l,"aria-label":"Close modal",children:e.jsx(y,{className:"h-6 w-6 text-gray-500 hover:text-gray-800"})})]}),e.jsxs("form",{onSubmit:h,className:"p-6 space-y-4",children:[g.map(t=>e.jsxs("div",{children:[e.jsx("label",{htmlFor:`add-${t.name}`,className:"block text-sm font-medium text-gray-700 mb-1",children:t.label}),e.jsx("input",{type:t.type,id:`add-${t.name}`,name:t.name,value:c[t.name],onChange:u,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-dark-teal"})]},t.name)),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"add-isi",className:"block text-sm font-medium text-gray-700 mb-1",children:"Tulis Informasi"}),e.jsx("textarea",{id:"add-isi",name:"isi",value:c.isi,onChange:u,rows:4,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-dark-teal"})]}),m&&e.jsx("p",{className:"text-red-500 text-sm",role:"alert",children:m}),e.jsxs("div",{className:"flex justify-end items-center pt-4 space-x-3",children:[e.jsx("button",{type:"button",onClick:l,className:"px-4 py-2 bg-gray-200 text-gray-800 rounded-md hover:bg-gray-300 transition-colors",children:"Batal"}),e.jsx("button",{type:"submit",className:"px-4 py-2 bg-green-600 text-white font-semibold rounded-md hover:bg-green-700 transition-colors",children:"Simpan"})]})]})]})})},O=()=>{const[l,r]=o.useState([]),[c,n]=o.useState(!1),[m,i]=o.useState(null),[u,h]=o.useState(!0),g=async()=>{h(!0);try{const a=await v();r(a)}catch(a){console.error("Error loading information:",a),r([])}finally{h(!1)}};o.useEffect(()=>{g()},[]);const t=async a=>{const d=await I(a);d?(r([...l,d]),n(!1),await S({type:"informasi",title:"Informasi Baru Tersedia!",message:`Informasi "${d.judul}" telah ditambahkan. Silakan baca sekarang!`,timestamp:new Date,isRead:!1})):alert("Gagal menambahkan informasi")},s=async a=>{window.confirm("Apakah Anda yakin ingin menghapus informasi ini?")&&(await k(a)?r(l.filter(b=>b.id!==a)):alert("Gagal menghapus informasi"))},x=async a=>{await C(a)?(r(l.map(b=>b.id===a.id?a:b)),i(null)):alert("Gagal mengupdate informasi")};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md border border-gray-200 h-full flex flex-col",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(f,{className:"h-8 w-8 text-dark-teal"}),e.jsx("h2",{className:"text-xl font-bold text-gray-800 uppercase tracking-wide",children:"DAFTAR INFORMASI"})]}),e.jsxs("button",{onClick:()=>n(!0),className:"flex items-center bg-green-500 text-white font-bold py-2 px-4 rounded shadow hover:bg-green-600 transition-colors duration-300",children:[e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(f,{className:"h-5 w-5"}),e.jsx(j,{className:"h-4 w-4"})]}),e.jsx("span",{className:"ml-2",children:"Tambahkan Informasi"})]})]}),e.jsx("div",{className:"flex-grow border-2 border-gray-300 rounded-lg overflow-hidden flex flex-col",children:e.jsx("div",{className:"overflow-x-auto overflow-y-auto custom-scrollbar h-full",children:e.jsxs("table",{className:"min-w-full bg-white text-sm",children:[e.jsx("thead",{className:"bg-gray-100 sticky top-0 z-10 border-b-2 border-gray-300",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left font-semibold text-gray-600",children:"No"}),e.jsx("th",{className:"px-4 py-3 text-left font-semibold text-gray-600",children:"Judul Informasi"}),e.jsx("th",{className:"px-4 py-3 text-left font-semibold text-gray-600",children:"Tanggal"}),e.jsx("th",{className:"px-4 py-3 text-left font-semibold text-gray-600",children:"Informasi"}),e.jsx("th",{className:"px-4 py-3 w-24"})]})}),e.jsxs("tbody",{className:"divide-y divide-gray-200",children:[l.map((a,d)=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-4 py-3 text-gray-500",children:d+1}),e.jsx("td",{className:"px-4 py-3 align-top font-medium text-green-700",children:a.judul}),e.jsx("td",{className:"px-4 py-3 align-top text-gray-500",children:a.tanggal}),e.jsx("td",{className:"px-4 py-3 align-top text-gray-500 max-w-sm whitespace-pre-wrap",children:a.isi}),e.jsx("td",{className:"px-4 py-3 align-top",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>i(a),className:"text-black hover:text-gray-700",title:"Edit",children:e.jsx(w,{className:"h-5 w-5"})}),e.jsx("button",{onClick:()=>s(a.id),className:"text-red-600 hover:text-red-800",title:"Delete",children:e.jsx(N,{className:"h-5 w-5"})})]})})]},a.id)),l.length===0&&e.jsx("tr",{children:e.jsx("td",{colSpan:5,className:"px-4 py-8 text-center text-gray-500",children:u?"Loading...":"Tidak ada data informasi."})})]})]})})})]}),c&&e.jsx(D,{onClose:()=>n(!1),onSave:t}),m&&e.jsx(T,{information:m,onClose:()=>i(null),onSave:x}),e.jsx("style",{children:`
                .custom-scrollbar::-webkit-scrollbar {
                    width: 10px;
                    height: 10px;
                }
                .custom-scrollbar::-webkit-scrollbar-track {
                    background: #f1f1f1;
                    border-radius: 5px;
                }
                .custom-scrollbar::-webkit-scrollbar-thumb {
                    background: #000;
                    border-radius: 5px;
                    border: 2px solid #f1f1f1;
                }
                .custom-scrollbar::-webkit-scrollbar-thumb:hover {
                    background: #555;
                }
            `})]})};export{O as default};
